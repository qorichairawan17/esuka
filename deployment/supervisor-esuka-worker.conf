; Supervisor Configuration for e-Suka Queue Workers
; File location: /etc/supervisor/conf.d/esuka-worker.conf
;
; After creating this file:
; 1. Update paths to match your installation
; 2. Copy to /etc/supervisor/conf.d/
; 3. Run: sudo supervisorctl reread
; 4. Run: sudo supervisorctl update
; 5. Run: sudo supervisorctl start esuka-worker:*

[program:esuka-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /path/to/esuka/artisan queue:work database --sleep=3 --tries=3 --max-time=3600 --timeout=90
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=www-data
numprocs=2
redirect_stderr=true
stdout_logfile=/path/to/esuka/storage/logs/worker.log
stopwaitsecs=3600

; Environment variables
environment=APP_ENV=production,DB_CONNECTION=mysql
